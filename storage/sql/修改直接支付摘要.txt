<?xml version="1.0" encoding="GB2312"?><R9PACKET version="1"><SESSIONID></SESSIONID><R9FUNCTION><NAME>AS_DataRequest</NAME><PARAMS><PARAM><NAME>ProviderName</NAME><DATA format="text">DataSetProviderData</DATA></PARAM><PARAM><NAME>Data</NAME><DATA format="text">Begin    declare iPDH  int ;     szSQBH    char(20);     szRBH     char(6) ;  begin  select  isnull(max(PDH),0) into iPDH from ZB_ZFSQDML  where Gsdm='001'    and KJND='2017'; select nvl(max(SQBH),'_') into szSQBH  from zb_zfsqdml  where Gsdm='001'    and KJND='2017'    and Substr(ysdwdm,1,3)='';  if  rtrim(szSQBH)='_' then    select '000001' into szSQBH from dual; else    select Substr(szSQBH,4,6) into szRBH from dual ;    select to_char(to_number(szRBH)+1) into szRBH from dual;    while Length(LTrim(RTrim(szRBH)))&lt;6 Loop      select '0' || LTrim(RTrim(szRBH)) into szRBH from dual;    end loop ;    select '' || rtrim(szRBH) into szSQBH from dual ;  end if; 
   update ZB_ZFSQDNR set    ZY ='枚溪村卫生计生服务室资金'  where Gsdm='001'    and KJND='2017'    and PDH=24892    and PDQJ='201706' ;   commit ;   open :pRecCur for select iPDH+1 BKPBH from dual; Exception when others then RollBack ; end; end; </DATA></PARAM></PARAMS></R9FUNCTION></R9PACKET>